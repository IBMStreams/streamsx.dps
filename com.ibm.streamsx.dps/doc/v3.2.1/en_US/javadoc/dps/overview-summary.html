<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0) on Tue Sep 12 17:01:36 CEST 2017 -->
<title>Overview (Streams Distributed Process Store (DPS) Java API)</title>
<meta name="date" content="2017-09-12">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview (Streams Distributed Process Store (DPS) Java API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div role="navigation" title ="TOP_Navigation" aria-label ="Top Navigation Bar"/>
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div role="main" title ="overview_Summary" aria-label ="Gives summary of packages"/>
<div class="header">
<div class="subTitle">
<div class="block">The Distributed Process Store (DPS) toolkit enables multiple applications running processing elements (PEs) on one or more machines to share application specific state information.</div>
</div>
<p>See: <a href="#overview.description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="com/ibm/streamsx/dl/package-summary.html">com.ibm.streamsx.dl</a></td>
<td class="colLast">
<div class="block">This package provides distributed locking functions which can be used for safe, concurrent access to distributed stores from multiple threads and processes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/ibm/streamsx/dps/package-summary.html">com.ibm.streamsx.dps</a></td>
<td class="colLast">
<div class="block">This package contains functions for creating and managing <a href="com/ibm/streamsx/dps/Store.html" title="interface in com.ibm.streamsx.dps"><code>Store</code></a>s.</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="contentContainer"><a name="overview.description">
<!--   -->
</a>
<div class="block">The Distributed Process Store (DPS) toolkit enables multiple applications running processing elements (PEs) on one or more machines to share application specific state information.  
The shared information is stored in an external key-value data store, such as <a href="http://redis.io">Redis</a>.
<p>
The Java API enables access to shared data in an external store, and additional locking functionality to provide safe, concurrent access to the shared data.
See the toolkit documentation in the Knowledge Center for details on configuring the toolkit.
Using the API, you can create and populate your own data stores, represented by <a href="com/ibm/streamsx/dps/Store.html" title="interface in com.ibm.streamsx.dps"><code>Store</code></a> objects and created using a <a href="com/ibm/streamsx/dps/StoreFactory.html" title="interface in com.ibm.streamsx.dps"><code>StoreFactory</code></a>.
Concurrency is supported via the classes in the <a href="com/ibm/streamsx/dl/package-summary.html"><code>com.ibm.streamsx.dl</code></a> package, specifically using a <a href="com/ibm/streamsx/dl/LockFactory.html" title="interface in com.ibm.streamsx.dl"><code>LockFactory</code></a> to create <a href="com/ibm/streamsx/dl/Lock.html" title="interface in com.ibm.streamsx.dl"><code>Lock</code></a> objects.
These locks can be shared across processes to synchronize access to the same user created stores, for example. 
There is also a global store that allows data to automatically expire after a specified amount of time, or to be kept indefinitely.  This is the Time To Live (TTL) store.
</p>
<p>
The following are examples of how to use the API.  You can create an individual store for your application, or use the global data store.
This example shows how to create and populate a <a href="com/ibm/streamsx/dps/Store.html" title="interface in com.ibm.streamsx.dps"><code>Store</code></a>.
<pre>
<code>

        StoreFactory sf = DistributedStores.getStoreFactory();
        Store store = null;
        
        try {
           //specify the SPL types for the keys and values in the store
           String keyType = "rstring";
           String valueType = "int32";
           store = sf.createOrGetStore("Java Test Store1", keyType, valueType);
        } catch (StoreFactoryException sfe) {
                // use  sfe.getErrorCode() and  sfe.getErrorMessage()) for more info
        }
        
        ...
        //once ready to access the store,
        //get the lock for the store, may have previously been created
           LockFactory lf = DistributedLocks.getLockFactory(); 
           Lock myLock = lf.createOrGetLock("Lock_For_Test_Store1");
        
        // Acquire the lock
        try {
                myLock.acquireLock();
        } catch (LockException le) {
                System.out.print("Unable to acquire the lock named 'Lock_For_Test_Store1'");
                System.out.println(" Error = " + le.getErrorCode() + ", Error msg = " + le.getErrorMessage());
            throw le;
        }
        
        //perform store operations
        store.put("IBM", 39);
        store.put("Lenovo", 50);
        //release the lock  when finished
        myLock.releaseLock();
        
</code>
</pre>
</p>
This example shows how to use the global Time To Live (TTL) store.
<pre>
<code>
StoreFactory  sf = DistributedStores.getStoreFactory();
RString myKey = new RString(""), myValue = new RString("");
myKey = new RString("New Jersey");
myValue = new RString("Trenton");

try {
   // Put a K/V pair with 5 seconds of TTL.  
   // We must provide the SPL type names for our key and value as literal strings as shown below.
   sf.putTTL(myKey, myValue, 5, "rstring", "rstring");
} catch (StoreFactoryException sfe) {
   System.out.println("Unexpected error in putTTL. Error code=" + 
      sfe.getErrorCode() + ", Error msg=" + sfe.getErrorMessage());
}

</code>
</pre>

<b>Note:</b> 
Fusing two or more Java operators that utilize the Java DPS API requires that each operator have the same class path and the <code> &#64;SharedLoader </code> annotation in its class definition.
For example:
<pre>
<code>
PrimitiveOperator(name="MyJavaOperator", namespace="com.ibm.demo",  description="Java Operator MyJavaOperator")
&#64;SharedLoader(true)
public class MyJavaOperator extends AbstractOperator {
...
}
</code>
</pre></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div role="navigation" title ="Bottom_NAVIGATION" aria-label ="Bottom Navigation Bar"/>
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
