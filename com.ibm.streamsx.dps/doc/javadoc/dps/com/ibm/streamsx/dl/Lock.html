<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0) on Mon Jan 25 10:22:00 EST 2016 -->
<title>Lock (Streams Distributed Process Store (DPS) Java API)</title>
<meta name="date" content="2016-01-25">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Lock (Streams Distributed Process Store (DPS) Java API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a>
<div class="skip"><a href="#skip-navbar_top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/ibm/streamsx/dl/DistributedLocks.html" title="class in com.ibm.streamsx.dl"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/ibm/streamsx/dl/LockException.html" title="class in com.ibm.streamsx.dl"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/ibm/streamsx/dl/Lock.html" target="_top">Frames</a></li>
<li><a href="Lock.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.ibm.streamsx.dl</div>
<h2 title="Interface Lock" class="title">Interface Lock</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="strong">Lock</span></pre>
<div class="block">This is an interface defining the available distributed lock (dl) methods.
 A lock implementation class will provide concrete logic for these methods.
 Use <a href="../../../../com/ibm/streamsx/dl/LockFactory.html" title="interface in com.ibm.streamsx.dl"><code>LockFactory</code></a> to get a usable instance of this class.
 <br>
 Example usage:
  <pre>
 
 <code>
 LockFactory lf = DistributedLocks.getLockFactory(); 
 Lock myLock = lf.createOrGetLock("Lock_For_Test_Store1");

// Acquire the lock
try {
   myLock.acquireLock();

} catch (LockException le) {
   System.out.println("Unable to acquire the lock named 'Lock_For_Test_Store1'. Error = " +
      le.getErrorCode() + ", Error msg = " + le.getErrorMessage());
      throw le;
}

 System.out.println("Successfully acquired the lock named 'Lock_For_Test_Store1'.");
 // Exclusive access to the distributed lock obtained.
 // Perform your operations on a shared data store safely now.
 // ....
 // ....
 //release the lock
 try {
  myLock.releaseLock();
} catch (LockException le) {}

 </code>
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/ibm/streamsx/dl/Lock.html#acquireLock()">acquireLock</a></strong>()</code>
<div class="block">Acquire a distributed lock before accessing a critical shared resource.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/ibm/streamsx/dl/Lock.html#acquireLock(double,%20double)">acquireLock</a></strong>(double&nbsp;leaseTime,
           double&nbsp;maxWaitTimeToAcquireLock)</code>
<div class="block">Acquire a distributed lock with lease time and max wait time before accessing a critical shared resource</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/ibm/streamsx/dl/Lock.html#getId()">getId</a></strong>()</code>
<div class="block">Get the id for this lock</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/ibm/streamsx/dl/Lock.html#releaseLock()">releaseLock</a></strong>()</code>
<div class="block">Release ownership of the lock.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getId</h4>
<pre>long&nbsp;getId()</pre>
<div class="block">Get the id for this lock</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>lock id</dd></dl>
</li>
</ul>
<a name="acquireLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireLock</h4>
<pre>void&nbsp;acquireLock()
                 throws <a href="../../../../com/ibm/streamsx/dl/LockException.html" title="class in com.ibm.streamsx.dl">LockException</a></pre>
<div class="block">Acquire a distributed lock before accessing a critical shared resource.
 <p>
 <b>IMPORTANT NOTE:</b>
Once called, this function could spin loop for a very long time (three or four minutes) until it acquires the distributed lock or it times out due to the distributed lock being not yet available.
Another important factor is that once the lock is granted, it is given to you for an infinite period of time. Hence, it is your responsibility to properly release the lock at the end of your task via <code>releaseLock</code>. There is no external mechanism to forcibly release a lock.
If either the  behavior of waiting for four minutes to acquire the lock or the indefinite allocation of lock to yourself is undesired, then use the alternative overloaded function, <code>acquireLock</code>, instead.
</p></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../com/ibm/streamsx/dl/LockException.html" title="class in com.ibm.streamsx.dl">LockException</a></code> - if the lock could not be acquired</dd></dl>
</li>
</ul>
<a name="acquireLock(double, double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireLock</h4>
<pre>void&nbsp;acquireLock(double&nbsp;leaseTime,
               double&nbsp;maxWaitTimeToAcquireLock)
                 throws <a href="../../../../com/ibm/streamsx/dl/LockException.html" title="class in com.ibm.streamsx.dl">LockException</a></pre>
<div class="block">Acquire a distributed lock with lease time and max wait time before accessing a critical shared resource</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>leaseTime</code> - time, in seconds, for which the lock will be owned by the caller.  If the caller doesn't release the lock after the requested lease time due to a program crash or a programmatic error, DPS internal code will automatically release the stale lock for others to acquire.</dd><dd><code>maxWaitTimeToAcquireLock</code> - maximum amount of time, in seconds, the caller is willing to wait to acquire the lock. If the lock acquisition is not done within the specified max wait time, this API will exit with an error instead of spin looping forever.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../com/ibm/streamsx/dl/LockException.html" title="class in com.ibm.streamsx.dl">LockException</a></code> - if the lock could not be acquired within the time specified.</dd></dl>
</li>
</ul>
<a name="releaseLock()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>releaseLock</h4>
<pre>void&nbsp;releaseLock()
                 throws <a href="../../../../com/ibm/streamsx/dl/LockException.html" title="class in com.ibm.streamsx.dl">LockException</a></pre>
<div class="block">Release ownership of the lock.  It  will be made available for other callers to acquire.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../com/ibm/streamsx/dl/LockException.html" title="class in com.ibm.streamsx.dl">LockException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a>
<div class="skip"><a href="#skip-navbar_bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/ibm/streamsx/dl/DistributedLocks.html" title="class in com.ibm.streamsx.dl"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/ibm/streamsx/dl/LockException.html" title="class in com.ibm.streamsx.dl"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/ibm/streamsx/dl/Lock.html" target="_top">Frames</a></li>
<li><a href="Lock.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
